# Diagrammes UML - Plateforme marsAI

## Introduction
Ce document contient les différents diagrammes UML de la plateforme marsAI : diagramme de classes, diagramme de cas d'utilisation, diagramme de séquence et diagramme d'activité.

---

## 1. Diagramme de Classes

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           DIAGRAMME DE CLASSES - marsAI                          │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────┐
│          User               │
├─────────────────────────────┤
│ - id: UUID                  │
│ - email: String             │
│ - password: String (hash)   │
│ - firstName: String         │
│ - lastName: String          │
│ - role: Enum                │
│ - language: Enum (FR/EN)    │
│ - createdAt: DateTime       │
│ - updatedAt: DateTime       │
│ - isActive: Boolean         │
├─────────────────────────────┤
│ + register()                │
│ + login()                   │
│ + logout()                  │
│ + updateProfile()           │
│ + changeLanguage()          │
└──────────────┬──────────────┘
               │
               │ extends
    ┌──────────┼──────────┬───────────────┐
    │          │          │               │
    ▼          ▼          ▼               ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌──────────────┐
│Realisateur│ │ Public │ │  Jury   │ │ Administrator│
├─────────┤ ├─────────┤ ├─────────┤ ├──────────────┤
│- bio    │ │         │ │         │ │              │
│- school │ │         │ │         │ │              │
│- socials│ │         │ │         │ │              │
│- avatar │ │         │ │         │ │              │
├─────────┤ ├─────────┤ ├─────────┤ ├──────────────┤
│+submit()│ │+view()  │ │+vote()  │ │+moderate()   │
│+getFilms│ │+share() │ │+like()  │ │+manageUsers()│
└────┬────┘ └─────────┘ │+dislike()│ │+getStats()  │
     │                  │+bookmark()│ └──────────────┘
     │                  └─────┬─────┘
     │                        │
     │ 1                      │ *
     │                        │
     ▼                        ▼
┌─────────────────────────────────────────┐
│                  Film                   │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - title: String                         │
│ - description: Text                     │
│ - youtubeUrl: String                    │
│ - posterUrl: String                     │
│ - thumbnailUrl: String                  │
│ - participationType: Enum (SOLO/GROUP)  │
│ - groupMembers: String[]                │
│ - status: Enum                          │
│ - viewCount: Integer                    │
│ - copyrightStatus: Enum                 │
│ - createdAt: DateTime                   │
│ - submissionDeadline: DateTime          │
├─────────────────────────────────────────┤
│ + submit()                              │
│ + updateStatus()                        │
│ + incrementViews()                      │
│ + checkCopyright()                      │
└────────────────────┬────────────────────┘
                     │
                     │ 1..1
                     ▼
┌─────────────────────────────────────────┐
│             AITechSheet                 │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - scenarioTools: String[]               │
│ - imageVideoTools: String[]             │
│ - postProductionTools: String[]         │
│ - otherTools: String[]                  │
├─────────────────────────────────────────┤
│ + validate()                            │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│                 Vote                    │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - juryId: UUID (FK)                     │
│ - filmId: UUID (FK)                     │
│ - score: Integer (1-10)                 │
│ - comment: Text                         │
│ - voteType: Enum (LIKE/DISLIKE)         │
│ - createdAt: DateTime                   │
├─────────────────────────────────────────┤
│ + create()                              │
│ + update()                              │
│ + delete()                              │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│               Bookmark                  │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - juryId: UUID (FK)                     │
│ - filmId: UUID (FK)                     │
│ - createdAt: DateTime                   │
├─────────────────────────────────────────┤
│ + add()                                 │
│ + remove()                              │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│              DislikeTrash               │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - juryId: UUID (FK)                     │
│ - filmId: UUID (FK)                     │
│ - createdAt: DateTime                   │
├─────────────────────────────────────────┤
│ + add()                                 │
│ + restore()                             │
│ + cleanOld() // garde les 5 derniers    │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│               Partner                   │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - name: String                          │
│ - logoUrl: String                       │
│ - websiteUrl: String                    │
│ - displayOrder: Integer                 │
│ - isActive: Boolean                     │
├─────────────────────────────────────────┤
│ + create()                              │
│ + update()                              │
│ + delete()                              │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│             Newsletter                  │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - email: String                         │
│ - subscribedAt: DateTime                │
│ - isActive: Boolean                     │
├─────────────────────────────────────────┤
│ + subscribe()                           │
│ + unsubscribe()                         │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│            Notification                 │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - userId: UUID (FK)                     │
│ - message: String                       │
│ - type: Enum                            │
│ - isRead: Boolean                       │
│ - createdAt: DateTime                   │
├─────────────────────────────────────────┤
│ + send()                                │
│ + markAsRead()                          │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│               Event                     │
│         (Module Optionnel)              │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - title: String                         │
│ - description: Text                     │
│ - eventType: Enum                       │
│ - startDate: DateTime                   │
│ - endDate: DateTime                     │
│ - location: String                      │
│ - maxCapacity: Integer                  │
│ - currentBookings: Integer              │
├─────────────────────────────────────────┤
│ + create()                              │
│ + update()                              │
│ + getAvailability()                     │
└─────────────────────────────────────────┘


┌─────────────────────────────────────────┐
│             Reservation                 │
│         (Module Optionnel)              │
├─────────────────────────────────────────┤
│ - id: UUID                              │
│ - userId: UUID (FK)                     │
│ - eventId: UUID (FK)                    │
│ - qrCode: String                        │
│ - status: Enum                          │
│ - createdAt: DateTime                   │
├─────────────────────────────────────────┤
│ + book()                                │
│ + cancel()                              │
│ + generateQR()                          │
└─────────────────────────────────────────┘
```

---

## 2. Diagramme Entité-Relation (Base de Données)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                      DIAGRAMME ENTITÉ-RELATION - marsAI                          │
└─────────────────────────────────────────────────────────────────────────────────┘

┌──────────────┐       1:N        ┌──────────────┐
│    users     │◄─────────────────│    films     │
├──────────────┤                  ├──────────────┤
│ PK id        │                  │ PK id        │
│ email        │                  │ FK user_id   │
│ password     │                  │ title        │
│ first_name   │                  │ description  │
│ last_name    │                  │ youtube_url  │
│ role         │                  │ poster_url   │
│ language     │                  │ thumbnail_url│
│ bio          │                  │ part_type    │
│ school       │                  │ group_members│
│ socials      │                  │ status       │
│ avatar_url   │                  │ view_count   │
│ is_active    │                  │ copyright_ok │
│ created_at   │                  │ created_at   │
│ updated_at   │                  └───────┬──────┘
└──────┬───────┘                          │
       │                                  │ 1:1
       │                                  ▼
       │                          ┌──────────────────┐
       │                          │  ai_tech_sheets  │
       │                          ├──────────────────┤
       │                          │ PK id            │
       │                          │ FK film_id       │
       │                          │ scenario_tools   │
       │                          │ image_video_tools│
       │                          │ postprod_tools   │
       │                          │ other_tools      │
       │                          └──────────────────┘
       │
       │           ┌──────────────┐
       │     N:M   │    votes     │
       └───────────┤──────────────┤
                   │ PK id        │
       ┌───────────│ FK jury_id   │
       │           │ FK film_id   │
       │           │ score        │
       │           │ comment      │
       │           │ vote_type    │
       │           │ created_at   │
       │           └──────────────┘
       │
       │           ┌──────────────┐
       │     N:M   │  bookmarks   │
       └───────────┤──────────────┤
                   │ PK id        │
       ┌───────────│ FK jury_id   │
       │           │ FK film_id   │
       │           │ created_at   │
       │           └──────────────┘
       │
       │           ┌──────────────────┐
       │     N:M   │  dislike_trash   │
       └───────────┤──────────────────┤
                   │ PK id            │
                   │ FK jury_id       │
                   │ FK film_id       │
                   │ created_at       │
                   └──────────────────┘


┌──────────────┐           ┌──────────────┐
│  partners    │           │  newsletter  │
├──────────────┤           ├──────────────┤
│ PK id        │           │ PK id        │
│ name         │           │ email        │
│ logo_url     │           │ subscribed_at│
│ website_url  │           │ is_active    │
│ display_order│           └──────────────┘
│ is_active    │
└──────────────┘


┌──────────────┐       1:N        ┌──────────────┐
│    users     │◄─────────────────│notifications │
└──────────────┘                  ├──────────────┤
                                  │ PK id        │
                                  │ FK user_id   │
                                  │ message      │
                                  │ type         │
                                  │ is_read      │
                                  │ created_at   │
                                  └──────────────┘


           ┌───────────────────────────────────────┐
           │         MODULE OPTIONNEL              │
           └───────────────────────────────────────┘

┌──────────────┐       1:N        ┌──────────────┐
│    events    │◄─────────────────│ reservations │
├──────────────┤                  ├──────────────┤
│ PK id        │                  │ PK id        │
│ title        │                  │ FK user_id   │
│ description  │                  │ FK event_id  │
│ event_type   │                  │ qr_code      │
│ start_date   │                  │ status       │
│ end_date     │                  │ created_at   │
│ location     │                  └──────────────┘
│ max_capacity │
│ bookings     │
└──────────────┘
```

---

## 3. Diagramme de Cas d'Utilisation

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                    DIAGRAMME DE CAS D'UTILISATION - marsAI                       │
└─────────────────────────────────────────────────────────────────────────────────┘

                                    ┌─────────────────────────────────────────┐
                                    │            Système marsAI               │
    ┌─────────┐                     │                                         │
    │Visiteur │                     │  ┌─────────────────────────────────┐   │
    └────┬────┘                     │  │         S'inscrire              │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         ├─────────────────────────►│  │         Se connecter            │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         ├─────────────────────────►│  │    Consulter le catalogue       │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         ├─────────────────────────►│  │     Regarder un film            │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         └─────────────────────────►│  │  S'inscrire à la newsletter     │   │
                                    │  └─────────────────────────────────┘   │
                                    │                                         │
    ┌─────────────┐                 │  ┌─────────────────────────────────┐   │
    │ Réalisateur │                 │  │     Compléter son profil        │   │
    └──────┬──────┘                 │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           ├───────────────────────►│  │      Soumettre un film          │   │
           │                        │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           ├───────────────────────►│  │   Remplir la fiche tech IA      │   │
           │                        │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           └───────────────────────►│  │  Consulter ses soumissions      │   │
                                    │  └─────────────────────────────────┘   │
                                    │                                         │
    ┌─────────┐                     │  ┌─────────────────────────────────┐   │
    │  Jury   │                     │  │   Visionner les films (TikTok)  │   │
    └────┬────┘                     │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         ├─────────────────────────►│  │     Liker / Noter (1-10)        │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         ├─────────────────────────►│  │         Disliker                │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         ├─────────────────────────►│  │    Récupérer un dislike         │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         ├─────────────────────────►│  │   Ajouter un signet             │   │
         │                          │  └─────────────────────────────────┘   │
         │                          │                                         │
         │                          │  ┌─────────────────────────────────┐   │
         └─────────────────────────►│  │   Consulter ses signets         │   │
                                    │  └─────────────────────────────────┘   │
                                    │                                         │
    ┌─────────────┐                 │  ┌─────────────────────────────────┐   │
    │    Admin    │                 │  │    Modérer les soumissions      │   │
    └──────┬──────┘                 │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           ├───────────────────────►│  │  Consulter le dashboard stats   │   │
           │                        │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           ├───────────────────────►│  │    Gérer les partenaires        │   │
           │                        │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           └───────────────────────►│  │    Gérer les utilisateurs       │   │
                                    │  └─────────────────────────────────┘   │
                                    │                                         │
    ┌─────────────┐                 │  ┌─────────────────────────────────┐   │
    │  Système    │                 │  │  Verrouillage auto soumissions  │   │
    └──────┬──────┘                 │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           ├───────────────────────►│  │  Vérifier copyright YouTube     │   │
           │                        │  └─────────────────────────────────┘   │
           │                        │                                         │
           │                        │  ┌─────────────────────────────────┐   │
           └───────────────────────►│  │  Envoyer notifications          │   │
                                    │  └─────────────────────────────────┘   │
                                    │                                         │
                                    └─────────────────────────────────────────┘
```

---

## 4. Diagramme de Séquence : Soumission d'un Film

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│              DIAGRAMME DE SÉQUENCE - Soumission d'un Film                        │
└─────────────────────────────────────────────────────────────────────────────────┘

┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
│Réalisateur│    │ Frontend │     │ Backend  │     │   BDD    │     │YouTube API│
└────┬─────┘     └────┬─────┘     └────┬─────┘     └────┬─────┘     └────┬─────┘
     │                │                │                │                │
     │  Accède au     │                │                │                │
     │  formulaire    │                │                │                │
     │───────────────►│                │                │                │
     │                │                │                │                │
     │                │ GET /api/submission/check-deadline               │
     │                │───────────────►│                │                │
     │                │                │                │                │
     │                │                │ SELECT deadline│                │
     │                │                │───────────────►│                │
     │                │                │                │                │
     │                │                │◄───────────────│                │
     │                │                │ deadline_date  │                │
     │                │                │                │                │
     │                │◄───────────────│                │                │
     │                │ { isOpen: true }│               │                │
     │                │                │                │                │
     │◄───────────────│                │                │                │
     │ Affiche form   │                │                │                │
     │                │                │                │                │
     │ Remplit form   │                │                │                │
     │ + upload poster│                │                │                │
     │───────────────►│                │                │                │
     │                │                │                │                │
     │                │ POST /api/films│                │                │
     │                │ { title, desc, │                │                │
     │                │   youtube_url, │                │                │
     │                │   ai_tech,     │                │                │
     │                │   poster }     │                │                │
     │                │───────────────►│                │                │
     │                │                │                │                │
     │                │                │ Validation     │                │
     │                │                │ des données    │                │
     │                │                │                │                │
     │                │                │ Check copyright│                │
     │                │                │────────────────────────────────►│
     │                │                │                │                │
     │                │                │◄────────────────────────────────│
     │                │                │ { copyright: OK }              │
     │                │                │                │                │
     │                │                │ Resize poster  │                │
     │                │                │ (thumbnail)    │                │
     │                │                │                │                │
     │                │                │ INSERT film    │                │
     │                │                │───────────────►│                │
     │                │                │                │                │
     │                │                │◄───────────────│                │
     │                │                │ film_id        │                │
     │                │                │                │                │
     │                │                │ INSERT ai_tech │                │
     │                │                │───────────────►│                │
     │                │                │                │                │
     │                │                │◄───────────────│                │
     │                │                │ OK             │                │
     │                │                │                │                │
     │                │◄───────────────│                │                │
     │                │ { success: true,               │                │
     │                │   filmId: xxx }│                │                │
     │                │                │                │                │
     │◄───────────────│                │                │                │
     │ Confirmation   │                │                │                │
     │ + redirection  │                │                │                │
     │                │                │                │                │
     │                │                │ Send email     │                │
     │                │                │ confirmation   │                │
     │◄──────────────────────────────────────────────────────────────────│
     │ Email reçu     │                │                │                │
     │                │                │                │                │
```

---

## 5. Diagramme de Séquence : Vote du Jury (Like)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                DIAGRAMME DE SÉQUENCE - Vote du Jury (Like)                       │
└─────────────────────────────────────────────────────────────────────────────────┘

┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
│   Jury   │     │ Frontend │     │ Backend  │     │   BDD    │
└────┬─────┘     └────┬─────┘     └────┬─────┘     └────┬─────┘
     │                │                │                │
     │ Visionne film  │                │                │
     │                │                │                │
     │ Swipe droite   │                │                │
     │ (LIKE)         │                │                │
     │───────────────►│                │                │
     │                │                │                │
     │◄───────────────│                │                │
     │ Pop-up notation│                │                │
     │ (1-10)         │                │                │
     │                │                │                │
     │ Sélectionne 8  │                │                │
     │ + commentaire  │                │                │
     │───────────────►│                │                │
     │                │                │                │
     │                │ POST /api/votes│                │
     │                │ { filmId,      │                │
     │                │   score: 8,    │                │
     │                │   comment,     │                │
     │                │   type: LIKE } │                │
     │                │───────────────►│                │
     │                │                │                │
     │                │                │ Vérifie si vote│
     │                │                │ existe déjà    │
     │                │                │───────────────►│
     │                │                │                │
     │                │                │◄───────────────│
     │                │                │ null           │
     │                │                │                │
     │                │                │ INSERT vote    │
     │                │                │───────────────►│
     │                │                │                │
     │                │                │◄───────────────│
     │                │                │ OK             │
     │                │                │                │
     │                │◄───────────────│                │
     │                │ { success: true }              │
     │                │                │                │
     │◄───────────────│                │                │
     │ Animation OK   │                │                │
     │                │                │                │
     │◄───────────────│                │                │
     │ Film suivant   │                │                │
     │ (auto)         │                │                │
     │                │                │                │
```

---

## 6. Diagramme de Séquence : Dislike et Récupération

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│              DIAGRAMME DE SÉQUENCE - Dislike et Récupération                     │
└─────────────────────────────────────────────────────────────────────────────────┘

┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
│   Jury   │     │ Frontend │     │ Backend  │     │   BDD    │
└────┬─────┘     └────┬─────┘     └────┬─────┘     └────┬─────┘
     │                │                │                │
     │ Swipe gauche   │                │                │
     │ (DISLIKE)      │                │                │
     │───────────────►│                │                │
     │                │                │                │
     │                │POST /api/votes │                │
     │                │{ filmId,       │                │
     │                │  type: DISLIKE}│                │
     │                │───────────────►│                │
     │                │                │                │
     │                │                │ INSERT vote    │
     │                │                │ (dislike)      │
     │                │                │───────────────►│
     │                │                │                │
     │                │                │ INSERT trash   │
     │                │                │ (5 derniers)   │
     │                │                │───────────────►│
     │                │                │                │
     │                │                │ DELETE old     │
     │                │                │ trash (> 5)    │
     │                │                │───────────────►│
     │                │                │                │
     │                │◄───────────────│                │
     │                │ { success }    │                │
     │                │                │                │
     │◄───────────────│                │                │
     │ Film suivant   │                │                │
     │                │                │                │
     │ ... plus tard  │                │                │
     │                │                │                │
     │ Clic corbeille │                │                │
     │───────────────►│                │                │
     │                │                │                │
     │                │GET /api/trash  │                │
     │                │───────────────►│                │
     │                │                │                │
     │                │                │ SELECT trash   │
     │                │                │ LIMIT 5        │
     │                │                │───────────────►│
     │                │                │                │
     │                │◄───────────────│                │
     │                │ [film1, film2] │                │
     │                │                │                │
     │◄───────────────│                │                │
     │ Liste films    │                │                │
     │ dislikés       │                │                │
     │                │                │                │
     │ Clic restaurer │                │                │
     │ film1          │                │                │
     │───────────────►│                │                │
     │                │                │                │
     │                │DELETE /api/    │                │
     │                │trash/{filmId}  │                │
     │                │───────────────►│                │
     │                │                │                │
     │                │                │ DELETE vote    │
     │                │                │ (dislike)      │
     │                │                │───────────────►│
     │                │                │                │
     │                │                │ DELETE trash   │
     │                │                │───────────────►│
     │                │                │                │
     │                │◄───────────────│                │
     │                │ { success }    │                │
     │                │                │                │
     │◄───────────────│                │                │
     │ Film restauré  │                │                │
     │                │                │                │
```

---

## 7. Diagramme d'Activité : Workflow de Modération

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                 DIAGRAMME D'ACTIVITÉ - Workflow de Modération                    │
└─────────────────────────────────────────────────────────────────────────────────┘

                              ┌─────────────┐
                              │   Début     │
                              └──────┬──────┘
                                     │
                                     ▼
                        ┌────────────────────────┐
                        │  Réalisateur soumet    │
                        │       un film          │
                        └───────────┬────────────┘
                                    │
                                    ▼
                        ┌────────────────────────┐
                        │  Vérification auto     │
                        │  copyright (YouTube)   │
                        └───────────┬────────────┘
                                    │
                         ┌──────────┴──────────┐
                         │                     │
                    ┌────▼────┐           ┌────▼────┐
                    │ Copyright│           │Copyright│
                    │   OK     │           │ Problème│
                    └────┬────┘           └────┬────┘
                         │                     │
                         │                     ▼
                         │         ┌─────────────────────┐
                         │         │ Notification erreur │
                         │         │   au réalisateur    │
                         │         └──────────┬──────────┘
                         │                    │
                         │                    ▼
                         │              ┌──────────┐
                         │              │   Fin    │
                         │              └──────────┘
                         │
                         ▼
              ┌────────────────────────┐
              │  Film en attente de    │
              │      modération        │
              └───────────┬────────────┘
                          │
                          ▼
              ┌────────────────────────┐
              │  Admin consulte film   │
              │  (vidéo + fiche IA)    │
              └───────────┬────────────┘
                          │
               ┌──────────┼──────────┬──────────────┐
               │          │          │              │
          ┌────▼────┐┌────▼────┐┌────▼────┐   ┌────▼────┐
          │ Valider ││ Refuser ││Sélection│   │En attente│
          └────┬────┘└────┬────┘│officielle│   │(report) │
               │          │     └────┬────┘   └────┬────┘
               │          │          │             │
               ▼          ▼          ▼             │
    ┌──────────────┐┌──────────────┐┌──────────────┐   │
    │Status: Validé││Status: Refusé││Status: Select│   │
    └──────┬───────┘└──────┬───────┘└──────┬───────┘   │
           │               │               │           │
           │               │               │           │
           ▼               ▼               ▼           │
    ┌──────────────────────────────────────────┐      │
    │      Notification au réalisateur         │      │
    │         (email + temps réel)             │      │
    └──────────────────┬───────────────────────┘      │
                       │                              │
                       │◄─────────────────────────────┘
                       │
          ┌────────────┴────────────┐
          │                         │
     ┌────▼────┐              ┌────▼────┐
     │ Film    │              │  Film   │
     │ visible │              │ dans    │
     │catalogue│              │ jury    │
     │ public  │              │interface│
     └────┬────┘              └────┬────┘
          │                        │
          │                        │
          ▼                        ▼
    ┌──────────┐            ┌──────────┐
    │   Fin    │            │   Fin    │
    └──────────┘            └──────────┘
```

---

## 8. Diagramme d'État : Cycle de Vie d'un Film

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                  DIAGRAMME D'ÉTAT - Cycle de Vie d'un Film                       │
└─────────────────────────────────────────────────────────────────────────────────┘


                                  ┌─────────────────┐
                                  │    BROUILLON    │
                                  │   (draft)       │
                                  └────────┬────────┘
                                           │
                                           │ submit()
                                           ▼
                                  ┌─────────────────┐
         copyright_fail()         │   EN_ATTENTE    │
        ┌─────────────────────────│  (pending)      │
        │                         └────────┬────────┘
        │                                  │
        │                     ┌────────────┴────────────┐
        │                     │                         │
        │             validate()                 reject()
        │                     │                         │
        ▼                     ▼                         ▼
┌───────────────┐    ┌─────────────────┐      ┌─────────────────┐
│   COPYRIGHT   │    │     VALIDÉ      │      │     REFUSÉ      │
│   (blocked)   │    │   (validated)   │      │   (rejected)    │
└───────────────┘    └────────┬────────┘      └─────────────────┘
                              │
                              │ select()
                              ▼
                     ┌─────────────────┐
                     │   SÉLECTIONNÉ   │
                     │   (selected)    │
                     │  [50 officiels] │
                     └────────┬────────┘
                              │
                 ┌────────────┴────────────┐
                 │                         │
           award()                   no_award()
                 │                         │
                 ▼                         ▼
        ┌─────────────────┐      ┌─────────────────┐
        │     PRIMÉ       │      │   NON_PRIMÉ     │
        │   (awarded)     │      │  (not_awarded)  │
        └─────────────────┘      └─────────────────┘



États possibles :
─────────────────
• BROUILLON  : Film en cours de création (non soumis)
• EN_ATTENTE : Film soumis, en attente de modération
• COPYRIGHT  : Bloqué pour problème de droits d'auteur
• VALIDÉ     : Film accepté, visible dans le catalogue public
• REFUSÉ     : Film rejeté par la modération
• SÉLECTIONNÉ: Film parmi les 50 de la compétition officielle
• PRIMÉ      : Film ayant reçu un prix
• NON_PRIMÉ  : Film sélectionné mais non primé (après festival)
```

---

## 9. Diagramme de Composants

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                    DIAGRAMME DE COMPOSANTS - Architecture marsAI                 │
└─────────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────┐
│                        CLIENT (React.js)                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐ │
│  │   Pages     │  │ Components  │  │      Services           │ │
│  ├─────────────┤  ├─────────────┤  ├─────────────────────────┤ │
│  │ - Home      │  │ - Header    │  │ - AuthService           │ │
│  │ - Catalogue │  │ - Footer    │  │ - FilmService           │ │
│  │ - Film      │  │ - FilmCard  │  │ - VoteService           │ │
│  │ - Submit    │  │ - VideoPlayer│ │ - i18nService           │ │
│  │ - JuryView  │  │ - SwipeCard │  │ - WebSocketService      │ │
│  │ - Dashboard │  │ - Pagination│  │                         │ │
│  │ - Profile   │  │ - Filters   │  │                         │ │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    State Management                      │   │
│  │               (React Context / Redux)                    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    Tailwind CSS                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────┬───────────────────────────────────┘
                              │
                              │ REST API / WebSocket
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                       SERVER (Node.js)                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                      Express.js                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐ │
│  │ Controllers │  │   Routes    │  │      Middlewares        │ │
│  ├─────────────┤  ├─────────────┤  ├─────────────────────────┤ │
│  │ - auth      │  │ /api/auth   │  │ - authMiddleware        │ │
│  │ - films     │  │ /api/films  │  │ - roleMiddleware        │ │
│  │ - votes     │  │ /api/votes  │  │ - validationMiddleware  │ │
│  │ - users     │  │ /api/users  │  │ - errorHandler          │ │
│  │ - admin     │  │ /api/admin  │  │ - rateLimiter           │ │
│  │ - partners  │  │ /api/partners│ │                         │ │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘ │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐ │
│  │   Models    │  │  Services   │  │        Utils            │ │
│  ├─────────────┤  ├─────────────┤  ├─────────────────────────┤ │
│  │ - User      │  │- YouTubeAPI │  │ - bcrypt (hash)         │ │
│  │ - Film      │  │- EmailService│ │ - JWT                   │ │
│  │ - Vote      │  │- ImageService│ │ - multer (upload)       │ │
│  │ - Bookmark  │  │- Notification│ │ - sharp (resize)        │ │
│  │ - Partner   │  │             │  │                         │ │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘ │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                   WebSocket Server                       │   │
│  │                (Notifications temps réel)                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────┬───────────────────────────────────┘
                              │
                              │ MySQL Protocol
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      DATABASE (MariaDB/MySQL)                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐           │
│  │  users   │ │  films   │ │  votes   │ │ bookmarks│           │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘           │
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐           │
│  │ai_tech   │ │ partners │ │newsletter│ │ trash    │           │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────┐
│                      SERVICES EXTERNES                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │   YouTube API   │  │  Google OAuth   │  │   SMTP Server   │ │
│  │  (Copyright)    │  │ (Authentification)│ │    (Emails)    │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 10. Diagramme de Déploiement

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                      DIAGRAMME DE DÉPLOIEMENT - marsAI                           │
└─────────────────────────────────────────────────────────────────────────────────┘


                    ┌──────────────────────────────────────┐
                    │           INTERNET                   │
                    └───────────────────┬──────────────────┘
                                        │
                                        │ HTTPS (443)
                                        ▼
                    ┌──────────────────────────────────────┐
                    │         REVERSE PROXY                │
                    │           (Nginx)                    │
                    │                                      │
                    │  • SSL Termination                   │
                    │  • Load Balancing                    │
                    │  • Static Files Cache                │
                    │  • Gzip Compression                  │
                    └───────────────────┬──────────────────┘
                                        │
                    ┌───────────────────┼───────────────────┐
                    │                   │                   │
                    ▼                   ▼                   ▼
    ┌───────────────────────┐ ┌─────────────────┐ ┌─────────────────┐
    │   FRONTEND SERVER     │ │ BACKEND SERVER  │ │ BACKEND SERVER  │
    │     (Static Build)    │ │   (Node.js #1)  │ │   (Node.js #2)  │
    │                       │ │                 │ │                 │
    │  React Build Output   │ │  Express API    │ │  Express API    │
    │  • index.html         │ │  Port: 3000     │ │  Port: 3001     │
    │  • bundle.js          │ │                 │ │                 │
    │  • styles.css         │ │  WebSocket      │ │  WebSocket      │
    │  • assets/            │ │                 │ │                 │
    └───────────────────────┘ └────────┬────────┘ └────────┬────────┘
                                       │                   │
                                       │                   │
                                       └─────────┬─────────┘
                                                 │
                                                 │ MySQL (3306)
                                                 ▼
                              ┌──────────────────────────────────┐
                              │       DATABASE SERVER            │
                              │         (MariaDB)                │
                              │                                  │
                              │  • Primary Database              │
                              │  • Automatic Backups             │
                              │  • Connection Pooling            │
                              └──────────────────────────────────┘


    ┌───────────────────────────────────────────────────────────────────┐
    │                        FILE STORAGE                               │
    │                                                                   │
    │   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
    │   │    Posters      │  │   Thumbnails    │  │    Avatars      │  │
    │   │   /uploads/     │  │  /thumbnails/   │  │   /avatars/     │
    │   │   posters/      │  │                 │  │                 │  │
    │   └─────────────────┘  └─────────────────┘  └─────────────────┘  │
    │                                                                   │
    │                     (CDN optionnel pour cache)                    │
    └───────────────────────────────────────────────────────────────────┘


    ┌───────────────────────────────────────────────────────────────────┐
    │                      EXTERNAL SERVICES                            │
    │                                                                   │
    │   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
    │   │   YouTube API   │  │  Google OAuth   │  │   SMTP (Email)  │  │
    │   │                 │  │                 │  │                 │  │
    │   │  Copyright      │  │  Authentication │  │  SendGrid /     │  │
    │   │  Verification   │  │  SSO            │  │  Mailgun        │  │
    │   └─────────────────┘  └─────────────────┘  └─────────────────┘  │
    │                                                                   │
    └───────────────────────────────────────────────────────────────────┘



Environnements :
────────────────
• DEVELOPMENT : localhost (docker-compose)
• STAGING     : staging.marsai.fr
• PRODUCTION  : www.marsai.fr
```

---

**Document UML créé pour l'équipe marsAI - Architecture technique complète**

